name: Subir APK a App Center
 
on:
  push:
    branches: [ main ]
 
jobs:
  build-and-release:
    runs-on: ubuntu-latest
 
    steps:
      - uses: actions/checkout@v3
 
      - name: Configurar Gradle
        uses: gradle/setup-gradle@v3
 
      - name: Construir APK
        run: ./gradlew assembleRelease
 
      - name: Subir APK a App Center
        uses: microsoft/appcenter-cli@v1.3.4
        with:
          appName: ${{ secrets.APP_CENTER_APP_NAME }}
          token: ${{ secrets.APP_CENTER_TOKEN }}
          group: ${{ secrets.APP_CENTER_GROUP }}
          file: app/build/outputs/apk/release/app-release.apk
